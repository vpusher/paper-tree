<!doctype html>

<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>paper-tree Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="../../web-animations-js/web-animations-next-lite.min.html"> <!-- Shim for KeyframeEffect, used in neon-animation/fade-in-animation (from paper-menu-button). The KeyframeEffect exception did however not appear in pre 2.0... -->
    <link rel="import" href="../../iron-demo-helpers/demo-pages-shared-styles.html">
    <link rel="import" href="../../iron-demo-helpers/demo-snippet.html">
    <link rel="import" href="../paper-tree.html">

    <custom-style>
        <style is="custom-style" include="demo-pages-shared-styles"></style>
    </custom-style>
</head>
<body>

<div class="vertical-section-container centered">

    <h3>Basic demo with only one node</h3>

    <demo-snippet>
        <template>
            <paper-tree id="tree1"></paper-tree>
            <script>

                var tree = document.querySelector('#tree1');

                // Only one node.
                tree.data = {
                    "name": "Hello"
                };

            </script>
        </template>
    </demo-snippet>

    <h3>Basic demo with one root node and some children</h3>
    <demo-snippet>
        <template>
            <paper-tree id="tree2"></paper-tree>
            <script>

                var tree = document.querySelector('#tree2');

                // Some children.
                tree.data = {
                    "name": "Hello",
                    "children": [{
                        "name": "World"
                    }, {
                        "name": "There"
                    }, {
                        "name": "You"
                    }]
                };
            </script>
        </template>
    </demo-snippet>


    <h3>Complex tree demo</h3>
    <demo-snippet>
        <template>
            <paper-tree id="tree3"></paper-tree>
            <script>

                var tree = document.querySelector('#tree3');

                // Setting some data.
                tree.data = {
                    "name": "GOT",
                    "icon": "theaters",
                    "open": true,
                    "children": [
                        {
                            "name": "Starks",
                            "icon": "turned-in",
                            "children": [{
                                "icon": "account-circle",
                                "name": "Eddard"
                            }, {
                                "name": "Catelyn",
                                "icon": "account-circle"
                            }, {
                                "name": "Sansa",
                                "icon": "account-circle"
                            }, {
                                "name": "Robb",
                                "icon": "account-circle"
                            }, {
                                "name": "Bran",
                                "icon": "account-circle"
                            }, {
                                "name": "Arya",
                                "icon": "account-circle"
                            }, {
                                "name": "Rickson",
                                "icon": "account-circle"
                            }]
                        },
                        {
                            "name": "Lannisters",
                            "open": true,
                            "icon": "turned-in",
                            "children": [{
                                "name": "Tywin",
                                "icon": "account-circle"
                            }, {
                                "name": "Tyrion",
                                "icon": "account-circle"
                            }, {
                                "name": "Jaime",
                                "icon": "account-circle"
                            }, {
                                "name": "Cersei",
                                "icon": "account-circle"
                            }, {
                                "name": "Tommen",
                                "icon": "account-circle"
                            }, {
                                "name": "Myrcella",
                                "icon": "account-circle"
                            }, {
                                "name": "Joffrey",
                                "icon": "account-circle"
                            }   ]
                        },
                        {
                            "name": "Targaryens",
                            "icon": "turned-in",
                            "children": [{
                                "name": "Daenerys",
                                "icon": "account-circle"
                            }, {
                                "name": "Viserys",
                                "icon": "account-circle"
                            }]
                        },
                        {
                            "name": "Baratheons",
                            "icon": "turned-in",
                            "open": true,
                            "children": [{
                                "name": "Robert",
                                "icon": "account-circle"
                            }, {
                                "name": "Stannis",
                                "icon": "account-circle"
                            }, {
                                "name": "Renly",
                                "icon": "account-circle"
                            }]
                        }
                    ]
                };

                // Adding one action.
                tree.actions = [{
                    label: 'show',
                    event: 'onshow'
                }];

                // Finally adding a listener for that action.
                tree.addEventListener('onshow', function(event) {
                    alert('This is ' + event.detail.data.name);
                });

            </script>
        </template>
    </demo-snippet>

    <h3>Lazy loading demo</h3>
    <demo-snippet>
        <template>
            <dom-bind>
                <template is="dom-bind">

                    <paper-tree id="tree" on-toggle="onToggle" data='{"name": "Loading..."}'></paper-tree>

                    <script>

                        var template = document.querySelector('dom-bind'),
                            tree = template.$.tree;

                        // Update the root data after 1 second delay
                        window.setTimeout(function() {
                            tree.data = { name:'Cronos' };
                            // Fetching root children ...
                            template.fetchChildren(tree.$.root);
                        }, 1000);


                        template.onToggle = function(event) {
                            var target = event.detail;

                            if (!target.loaded) {
                                target.loaded = true;
                                target.getChildren().forEach(function(child){
                                    // Fetching children ...
                                    this.fetchChildren(child);
                                }, this);
                            }
                        },

                        template.setLoadingState = function(node, enabled) {
                            node.set('data.loading', enabled);
                        },

                        template.fetchChildren = function(node) {

                            // Set loading styles
                            this.setLoadingState(node, true);

                            window.setTimeout(function() {

                                // Add children to the node
                                node.set('data.children', [
                                    {name: 'Zeus'},
                                    {name: 'Apollo'},
                                    {name: 'Athena'},
                                    {name: 'Poseidon'}
                                ]);

                                // Reset loading styles
                                this.setLoadingState(node, false);

                            }.bind(this), Math.floor(Math.random() * 2000));
                        }
                    </script>
                </template>
            </dom-bind>
        </template>
    </demo-snippet>

</div>
</body>
</html>
